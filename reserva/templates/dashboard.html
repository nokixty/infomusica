{% extends 'modelo.html' %}
{% load static %}

{% block titulo %}
<title>Página Inicial</title>
{% endblock %}
    
{% block conteudo %}
<div  class="container-fluid">
    <div id="mainContainer" class="container">
        <h1>
            Página Inicial</h1>  
        
        <hr>
        
        <div class="d-flex align-items-center">
                <a class="" href="{% url 'criar-solicitacao' %}">
                    <strong>Solicite um horário para reservar a Sala de Música.</strong></a>

        </div>
        
        <hr>

        <div id="calendarRow" class="row d-flex py-2">
            <div class="col-md-9 mx-auto">
                <div id='calendar'></div> 
                </div>
        </div>
        
    </div> 
        
</div>
{% endblock %}

{% block script %}
    
<script>

    document.addEventListener('DOMContentLoaded', function() {
      var calendarEl = document.getElementById('calendar');
      var calendar = new FullCalendar.Calendar(calendarEl, {
        initialView: 'dayGridMonth',
        locale: 'pt-br',
        buttonText: {today: 'Hoje'},
        dayMaxEventRows: true, // for all non-TimeGrid views
            views: {
                timeGrid: {
                dayMaxEventRows: 6 // adjust to 6 only for timeGridWeek/timeGridDay
                }
            },

        events: [
            {% for solicitacao in object_list %}
                {
                    title: '{{ solicitacao.usuario }}',
                    start: '{{ solicitacao.data | date:"Y-m-d" }}T{{solicitacao.entry_hour}}',
                    end: '{{ solicitacao.data | date:"Y-m-d" }}T{{solicitacao.exit_hour}}',
                    extendedProps: { 
                        justificativa: '{{ solicitacao.justificativa }}'
                    },
                }, 
            {% endfor %}
        ],

      });
      calendar.render();
    });

  </script>

{% endblock %}